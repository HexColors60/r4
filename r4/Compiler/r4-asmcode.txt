| Code Generator V4
| PHREDA 2017
|------------------------
^r4/compiler/r4-cellana.txt
^r4/compiler/r4-tokenprint.txt

:cadatoken | token --
	tokenstr ,print ,cr ;

:compilacode
	"; **" ,s
	dup dic>mov @ ,printmovword
	" ** " ,s 	
	dup dic>inf @ ,printinfowor
	" **" ,s ,cr

	cellana
	cellinfo
	blockinfo
|	dup dic>tok @ swap dic>len@
|	( 1? )( 1- swap @+ cadatoken swap ) 2drop
|	,cr
	;

::,generateCODE
	0 ( cntwords <? )(
		dup dic>inf @ 1 nand? ( over compilacode )
		drop 1+ ) drop ;