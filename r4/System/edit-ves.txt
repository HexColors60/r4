| reanimator.txt
| PHReda Nov2006
|----------------
^r4/lib/gui.txt
^r4/lib/dlg.txt
^r4/lib/vesprite.txt

^r4/lib/dlg.txt
^r4/lib/dlgfile.txt
^r4/lib/dlgcol.txt

^r4/lib/ricons.txt
^inc/ric/fontawesomewebfont.ric

#modo
#color
#xv #yv #sv
#ves
#ves>


:mododraw
:modovista
:modoeditn
:modoeditp
;
:toodraw

:toovista
:tooeditn
:tooeditp
;


|------- modos
#modos 'mododraw 'modovista 'modoeditp  'modoeditn
#tools 'toodraw 'toovista 'tooeditp 'tooeditn

:btnric | icon vec --
	ink@ >r btne blanco 2-gc drawric 2+gc r> ink ;

|----- botonera
#modogui 'mododraw
#modotoo 'toodraw

:setmodo
	dup 'modo !
	dup 2 <<
	dup 'modos + @ 'modogui !
	'tools + @ 'modotoo !
	;

:botonmodo | icon nro --
	modo =? ( azul )( negro )
	'setmodo btne
	modo =? ( blanco )( gris )
	drop 8-gc drawric 8+gc gcdn ;

:drawves
	xv yv pos sv qdim
	gc.box
	ves vesprite
	;

:botonera
   	24 qdim sw 12 - 12 pos
	rojo 'exit dup >esc< btne blanco 'i.off drawric

	32 qdim 24 48 pos
	'i.pencil 0 botonmodo
	'i.zoom_in 1 botonmodo
	'i.bookmark 2 botonmodo
	'i.hand_up 3 botonmodo
|	'i.magic 4 botonmodo
	gcdn
	verde oscuro
|	'i.undo 0 btnric gcdn
|	'i.repeat 0 btnric gcdn gcdn
    modotoo exec

	sw 26 - 48 pos
	'color btncol

	;

:main
	4
	show clrscr
		fonti
		verde oscuro 2 linesfill blanco
		dup ":r%d VesEditor " print cr
		drawves

        botonera

		'exit >esc<
		cminiflecha ;

:vmem
	mark
	here dup 'ves ! dup 'ves> ! 0 swap !
	sw dup 2/ 'xv !
	sh dup 2/ 'yv !
	min 64 - 'sv !
	;

: 	0 paper
	vmem
	ves "mem/notepad.vsp" load 'ves> !
	main
	ves ves> over - "mem/notepad.vsp" save ;
