^r4/lib/gui.txt

#xm #ym
#x #y
#e2
#dx
#dy
#err
#2bb
#2aa

:qfill
	xm x - ym y - op
	xm x + ym y - line
	xm x - ym y + op
	xm x + ym y + line ;
:qfill1
	xm x - ym op
	xm x + ym line ;

:ellipse | a b xm ym
	'ym ! 'xm !
	over neg 'x !
	0 'y !
	over neg 2* 1+ over dup * * 'dx !
	over dup * 'dy !
	dx dy + 'err !
	dup * 2* '2bb !
	dup * 2* '2aa !
	qfill1
	1 'y +! 2aa 'dy +! dy 'err +!
	( x -? )( drop
		err 2*
		dx >=? ( 1 'x +! 2bb 'dx +! dx 'err +! )
		dy <=? ( qfill 1 'y +! 2aa 'dy +! dy 'err +! )
		drop
		) drop ;

:main
	show clrscr
		azul
		180 160 220 140 cajaf

		verde
		128 alpha
		41 41 100 100 ellipse
		xymouse  300 300 ellipse
		40 20 300 100 ellipse
		'exit >esc<

			;
: main ;